(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{158:function(e,t,n){"use strict";n.d(t,"a",(function(){return ge}));var r=n(159),a=n(235),o=n(238),i=n(236),c=n(5),s=n.n(c),l=n(7),u=n.n(l),d=n(8),p=n.n(d),b=n(0),j=n(3),f=n(1),O=n(38),x=n(11),y={primary50:"#e4d9fd",primary100:"#c6affc",primary200:"#a281f0",primary400:"#5721d4",primary500:"#3e04c3",primary700:"#2d0689",primary800:"#200364",accent500:"#f7bc0c",error50:"#fcc4e4",error500:"#9b095c",gray500:"#39324a",gray700:"#221c30"},m=n(4),g=function(e){var t=e.children,n=e.onPress,r=e.mode,a=e.style;return Object(m.jsx)(f.a,{style:a,children:Object(m.jsx)(O.a,{onPress:n,style:function(e){return e.pressed&&h.pressed},children:Object(m.jsx)(f.a,{style:[h.button,"flat"===r&&h.flat],children:Object(m.jsx)(x.a,{style:[h.buttonText,"flat"===r&&h.flatText],children:t})})})})},h=j.a.create({button:{borderRadius:4,padding:8,backgroundColor:y.primary500},flat:{backgroundColor:"transparent"},buttonText:{color:"white",textAlign:"center"},flatText:{color:y.primary200},pressed:{opacity:.75,backgroundColor:y.primary100,borderRadius:4}}),v=n(101),w=function(e){var t=e.message,n=e.onConfirm;return Object(m.jsxs)(f.a,{style:P.container,children:[Object(m.jsx)(x.a,{style:[P.text,P.title],children:"An error occure!"}),Object(m.jsx)(x.a,{style:P.text,children:t}),Object(m.jsx)(v.a,{onPress:n,children:"Okay"})]})},P=j.a.create({container:{flex:1,justifyContent:"center",alignItems:"center",padding:24,backgroundColor:y.primary700},text:{textAlign:"center",marginBottom:8},title:{fontSize:20,fontWeight:"bold"},message:{fontSize:14}});function C(e){return e.toISOString().slice(0,10)}var D=n(140);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=function(e){var t=e.label,n=e.textInputConfig,r=e.style,a=e.invalid,o=[T.input];return n&&n.multiline&&o.push(T.inputMultiline),a&&o.push(T.invalidInput),Object(m.jsxs)(f.a,{style:[T.inputContainer,r],children:[Object(m.jsx)(x.a,{style:[T.label,a&&T.invalidLabel],children:t}),Object(m.jsx)(D.a,S({style:o},n))]})},T=j.a.create({inputContainer:{marginHorizontal:4,marginVertical:8},label:{fontSize:12,color:y.primary100,marginBottom:4},input:{backgroundColor:y.primary100,color:y.primary700,padding:6,borderRadius:6,fontSize:18},inputMultiline:{minHeight:100,textAlignVertical:"top"},invalidLabel:{color:y.error500},invalidInput:{backgroundColor:y.error50}});function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V=function(e){var t=e.onCancel,n=e.onSubmit,r=e.submitButtonLabel,a=e.defaultValues,o=Object(b.useState)(""),i=u()(o,2),c=(i[0],i[1],Object(b.useState)({amount:{value:a?a.amount.toString():"",isValid:!0},date:{value:a?C(a.date):"",isValid:!0},description:{value:a?a.description:"",isValid:!0}})),l=u()(c,2),d=l[0],p=l[1];function j(e,t){p((function(n){return z(z({},n),{},s()({},e,{value:t,isValid:!0}))}))}var O=!d.amount.isValid||!d.date.isValid||!d.description.isValid;return Object(m.jsxs)(f.a,{style:A.form,children:[Object(m.jsx)(x.a,{style:A.title,children:"Your Expense"}),Object(m.jsxs)(f.a,{style:A.inputsRow,children:[Object(m.jsx)(k,{style:A.rowInput,label:"Amount",invalid:!d.amount.isValid,textInputConfig:{keyboardType:"decimal-pad",onChangeText:j.bind(void 0,"amount"),value:d.amount.value}}),Object(m.jsx)(k,{style:A.rowInput,label:"Date",invalid:!d.date.isValid,textInputConfig:{placeholder:"YYYY-MM-DD",maxLength:10,onChangeText:j.bind(void 0,"date"),value:d.date.value}})]}),Object(m.jsx)(k,{label:"Description",invalid:!d.description.isValid,textInputConfig:{multiline:!0,onChangeText:j.bind(void 0,"description"),value:d.description.value}}),!O&&Object(m.jsx)(x.a,{style:A.errorText,children:"Invalid input values - please check your entered data!"}),Object(m.jsxs)(f.a,{style:A.buttons,children:[Object(m.jsx)(g,{style:A.button,mode:"flat",onPress:t,children:"Cancel"}),Object(m.jsx)(g,{style:A.button,onPress:function(){var e={amount:+d.amount.value,date:new Date(d.date.value),description:d.description.value},t=!isNaN(e.amount)&&e.amount>0,r="Invalid Date"!==e.date.toString(),a=e.description.trim().length>0;t&&r&&a?n(e):p((function(e){return{amount:{value:e.amount.value,isValid:t},date:{value:e.date.value,isValid:r},description:{value:e.description.value,isValid:a}}}))},children:r})]})]})},A=j.a.create({form:{marginTop:40},title:{fontSize:24,fontWeight:"bold",color:"white",marginVertical:24,textAlign:"center"},inputsRow:{flexDirection:"row",justifyContent:"space-between"},rowInput:{flex:1},errorText:{textAlign:"center",color:y.error500,margin:8},buttons:{flexDirection:"row",justifyContent:"center",alignItems:"center"},button:{minWidth:120,marginHorizontal:8}}),B=n(237),R=function(e){var t=e.icon,n=e.color,r=e.size,a=e.onPress;return Object(m.jsx)(O.a,{onPress:a,style:function(e){return e.pressed&&L.pressed},children:Object(m.jsx)(f.a,{style:L.buttonContainer,children:Object(m.jsx)(B.a,{name:t,color:n,size:r})})})},L=j.a.create({buttonContainer:{borderRadius:24,padding:6,marginHorizontal:8,marginVertical:2},pressed:{opacity:.75}}),W=n(99),M=function(){return Object(m.jsx)(f.a,{style:N.container,children:Object(m.jsx)(W.a,{size:"large",color:"white"})})},N=j.a.create({container:{flex:1,justifyContent:"center",alignItems:"center",padding:24,backgroundColor:y.primary700}}),H=n(13),Y=n.n(H);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var J=Object(b.createContext)({expenses:[],addExpense:function(e){e.description,e.amount,e.date},setExpenses:function(e){},deleteExpense:function(e){},updateExpense:function(e,t){t.description,t.amount,t.date}});function $(e,t){switch(t.type){case"ADD":return[t.payload].concat(Y()(e));case"SET":return t.payload.reverse();case"UPDATE":var n=e.findIndex((function(e){return e.id===t.payload.id})),r=U(U({},e[n]),t.payload.data),a=Y()(e);return a[n]=r,a;case"DELETE":return e.filter((function(e){return e.id!==t.payload}));default:return e}}var q=function(e){var t=e.children,n=Object(b.useReducer)($,[]),r=u()(n,2),a=r[0],o=r[1],i={expenses:a,setExpenses:function(e){o({type:"SET",payload:e})},addExpense:function(e){o({type:"ADD",payload:e})},deleteExpense:function(e){o({type:"DELETE",payload:e})},updateExpense:function(e,t){o({type:"UPDATE",payload:{id:e,data:t}})}};return Object(m.jsx)(J.Provider,{value:i,children:t})},G=n(75),K=n.n(G),Q="https://react-native-course-2addc-default-rtdb.firebaseio.com";function X(e){var t,n;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,p.a.awrap(K.a.post(Q+"/expenses.json",e));case 2:return t=r.sent,n=t.data.name,r.abrupt("return",n);case 5:case"end":return r.stop()}}),null,null,null,Promise)}function Z(){var e,t,n,r;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,p.a.awrap(K.a.get(Q+"/expenses.json"));case 2:for(n in e=a.sent,t=[],e.data)r={id:n,amount:e.data[n].amount,date:new Date(e.data[n].date),description:e.data[n].description},t.push(r);return a.abrupt("return",t);case 6:case"end":return a.stop()}}),null,null,null,Promise)}function _(e,t){return K.a.put(Q+"/expenses/"+e+".json",t)}function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ne=function(e){var t,n=e.route,r=e.navigation,a=Object(b.useState)(!1),o=u()(a,2),i=o[0],c=o[1],s=Object(b.useState)(),l=u()(s,2),d=l[0],j=l[1],O=Object(b.useContext)(J),x=null==(t=n.params)?void 0:t.expenseId,g=!!x,h=O.expenses.find((function(e){return e.id===x}));return Object(b.useLayoutEffect)((function(){r.setOptions({title:g?"Edit Expense":"Add Expense"})}),[r,g]),d&&!i?Object(m.jsx)(w,{message:d,onConfirm:function(){j(null)}}):i?Object(m.jsx)(M,{}):Object(m.jsxs)(f.a,{style:re.container,children:[Object(m.jsx)(V,{onSubmit:function(e){var t;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(c(!0),!g){n.next=7;break}return O.updateExpense(x,e),n.next=5,p.a.awrap(_(x,e));case 5:n.next=11;break;case 7:return n.next=9,p.a.awrap(X(e));case 9:t=n.sent,O.addExpense(te(te({},e),{},{id:t}));case 11:r.goBack();case 12:case"end":return n.stop()}}),null,null,null,Promise)},submitButtonLabel:g?"Update":"Add",onCancel:function(){r.goBack()},defaultValues:h}),Object(m.jsx)(f.a,{style:re.delete,children:g&&Object(m.jsx)(R,{icon:"trash",color:y.error500,size:36,onPress:function(){return p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.prev=1,e.next=4,p.a.awrap((t=x,K.a.delete(ur+"/expenses/"+t+".json")));case 4:O.deleteExpense(x),r.goBack(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),j("Could not delete expense -try again"),c(!1);case 12:case"end":return e.stop()}var t}),null,null,[[1,8]],Promise)}})})]})},re=j.a.create({container:{flex:1,padding:24,backgroundColor:y.primary800},buttons:{flexDirection:"row",justifyContent:"center",alignItems:"center"},button:{minWidth:120,marginHorizontal:8},delete:{marginTop:16,paddingTop:18,borderTopWidth:2,borderTopColor:y.primary200,alignItems:"center"}}),ae=n(66),oe=n(18),ie=function(e){var t=e.description,n=e.amount,r=e.date,a=e.id,o=Object(oe.o)();return Object(m.jsx)(O.a,{onPress:function(){o.navigate("Manage",{expenseId:a})},style:function(e){return e.pressed&&ce.pressed},children:Object(m.jsxs)(f.a,{style:ce.item,children:[Object(m.jsxs)(f.a,{children:[Object(m.jsx)(x.a,{style:[ce.description,ce.textBase],children:t}),Object(m.jsx)(x.a,{style:[ce.textBase],children:C(r)})]}),Object(m.jsx)(f.a,{style:ce.amountContainer,children:Object(m.jsx)(x.a,{style:ce.amount,children:n.toFixed(2)})})]})})},ce=j.a.create({pressed:{opacity:.75},item:{padding:12,marginVertical:8,backgroundColor:y.primary500,flexDirection:"row",justifyContent:"space-between",borderRadius:6,shadowColor:y.gray500,shadowRadius:4,shadowOffset:{width:1,height:1},shadowOpacity:.4},textBase:{color:y.primary50},description:{fontSize:16,marginBottom:4,fontWeight:"bold"},amountContainer:{paddingHorizontal:12,paddingVertical:4,backgroundColor:"white",justifyContent:"center",alignItems:"center",borderRadius:4,minWidth:80},amount:{color:y.primary500,fontWeight:"bold"}});function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function le(e){return Object(m.jsx)(ie,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.item))}var ue=function(e){var t=e.expenses;return Object(m.jsx)(ae.a,{data:t,renderItem:le,keyExtractor:function(e){return e.id}})},de=function(e){var t=e.periodName,n=e.expenses.reduce((function(e,t){return e+t.amount}),0);return Object(m.jsxs)(f.a,{style:pe.container,children:[Object(m.jsx)(x.a,{style:pe.period,children:t}),Object(m.jsxs)(x.a,{style:pe.sum,children:["$",n.toFixed(2)]})]})},pe=j.a.create({container:{padding:8,backgroundColor:y.primary50,borderRadius:6,flexDirection:"row",justifyContent:"space-between"},period:{fontSize:12,color:y.primary100},sum:{fontSize:16,fontWeight:"bold",color:y.primary500}}),be=function(e){var t=e.expenses,n=e.expensesPeriod,r=e.fallback,a=Object(m.jsx)(x.a,{style:je.infoText,children:r});return t.length>0&&(a=Object(m.jsx)(ue,{expenses:t})),Object(m.jsxs)(f.a,{style:je.container,children:[Object(m.jsx)(de,{expenses:t,periodName:n}),a]})},je=j.a.create({container:{flex:1,padding:24,backgroundColor:y.primary700},infoText:{color:"white",fontSize:16,textAlign:"center",marginTop:32}}),fe=function(){var e=Object(b.useState)(!0),t=u()(e,2),n=t[0],r=t[1],a=Object(b.useState)(),o=u()(a,2),i=o[0],c=o[1],s=Object(b.useContext)(J);if(Object(b.useEffect)((function(){!function(){var e;p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return r(!0),t.prev=1,t.next=4,p.a.awrap(Z());case 4:e=t.sent,s.setExpenses(e),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),c("Could not fetch expenses!");case 11:r(!1);case 12:case"end":return t.stop()}}),null,null,[[1,8]],Promise)}()}),[]),i&&!n)return Object(m.jsx)(w,{message:i,onConfirm:function(){c(null)}});if(n)return Object(m.jsx)(M,{});var l=s.expenses.filter((function(e){var t,n,r=new Date,a=(t=r,n=7,new Date(t.getFullYear(),t.getMonth(),t.getDate()-n));return e.date>a}));return Object(m.jsx)(be,{expenses:l,expensesPeriod:"Last 7 days",fallback:"No expenses registered"})},Oe=function(){var e=Object(b.useContext)(J);return Object(m.jsx)(be,{expenses:e.expenses,expensesPeriod:"Last 7 days",fallback:"No expenses registered"})},xe=Object(o.a)(),ye=Object(i.a)();function me(){return Object(m.jsxs)(ye.Navigator,{screenOptions:function(e){var t=e.navigation;return{headerStyle:{backgroundColor:y.primary500},headerTintColor:"white",tabBarStyle:{backgroundColor:y.primary500},tabBarActiveTintColor:y.accent500,headerRight:function(e){var n=e.tintColor;return Object(m.jsx)(R,{icon:"add",size:24,color:n,onPress:function(){t.navigate("Manage")}})}}},children:[Object(m.jsx)(ye.Screen,{name:"Recent",component:fe,options:{title:"Recent Expenses",tabBarLabel:"Recent",tabBarIcon:function(e){var t=e.color,n=e.size;return Object(m.jsx)(B.a,{name:"hourglass",size:n,color:t})}}}),Object(m.jsx)(ye.Screen,{name:"All",component:Oe,options:{title:"All Expenses",tabBarLabel:"All",tabBarIcon:function(e){var t=e.color,n=e.size;return Object(m.jsx)(B.a,{name:"calendar",size:n,color:t})}}})]})}function ge(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(r.a,{style:"auto"}),Object(m.jsx)(q,{children:Object(m.jsx)(a.a,{children:Object(m.jsxs)(xe.Navigator,{screenOptions:{headerStyle:{backgroundColor:y.primary500},headerTintColor:"white"},children:[Object(m.jsx)(xe.Screen,{name:"ExpensesOverview",component:me,options:{headerShown:!1}}),Object(m.jsx)(xe.Screen,{name:"Manage",component:ne,options:{presentation:"modal"}})]})})})]})}},163:function(e,t,n){e.exports=n(225)}},[[163,1,2]]]);
//# sourceMappingURL=app.76b8fb83.chunk.js.map